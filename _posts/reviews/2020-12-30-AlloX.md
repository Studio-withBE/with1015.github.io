---
title: "AlloX: Compute Allocation in Hybrid Clusters"
author: Hyunjoon Jeong
layout: post
category: review
---
본 리뷰는 EuroSys'20에 게재된 논문 "AlloX: Compute Allocation in Hybrid Clusters"를 읽고 내용을 간단히 정리하고자 쓰였습니다.  
(틀린 내용이나 잘못 이해하고 있는 부분이 있다면 지적 부탁 드리겠습니다.)

AlloX의 motivation은 딥러닝 프레임워크에 대한 "interchangeable resource"로부터 시작합니다.  
보통 기존의 딥러닝은 GPU에서 주로 처리가 되었으나 구글의 Tensor Processing Unit (이하 TPU) 같은 장치들이 Tensorflow의 지원을 받기 시작하면서 딥러닝 클러스터가 heterogeneous computation device로 구성되게 되었습니다.  
하지만 이러한 클러스터에서 장치들은 interchangeability를 가지게 되지만 이 때문에 선택되는 configuration으로 인해 딥러닝 작업별로 processing time이나 throughput에 큰 차이를 보이게 됩니다. 에따라 AlloX의 저자들은 다음과 같은 motivation을 추가로 제시했습니다.  

1. Application 단위에서의 interchangeable resource별 성능
2. CPU와 같은 일부 resource의 under-utilization 문제
3. 기존에 존재하는 scheduling policy의 비효율성

![title](/assets/images/allox_01.jpg){: width="80%" height="80%" .aligncenter}

위 그림과 같이 Bi-LSTM이나 video analytics 같은 작업은 GPU와 CPU를 사용하였을 때 성능이 거의 차이가 없거나 오히려 CPU에서의 작업이 더 나은 성능을 보입니다.  

![title](/assets/images/allox_02.jpg){: width="40%" height="40%" .aligncenter}

또한 위 그래프는 두번째 motivation에서 언급한 바와 같이 Azure 사용자들의 CPU utilization이 대부분 20%에 못미치는 것으로 일부 resource의 under-utilization 문제를 뒷받침 해주고 있습니다. 이러한 under-utilization 문제를 해결하기 위한 방법으로 CPU와 그 외 성능에 더 유리한 resource들을 두고 적절히 스케줄링하는 방법이 있을 것입니다. 하지만 AlloX의 저자들은 기존의 스케줄링 정책은 multi-resource에 대해서는 효율적이지 않다고 언급합니다.  

![title](/assets/images/allox_03.jpg){: width="50%" height="50%" .aligncenter}  

모든 작업들의 processing time을 알고 있다는 전제 하에 저자들은 First-Come-First-Serve (FCFS), Equal Share (ES), Best Fit (BF), Shortest Job First (SJF), Join the Shortest Queue (JSQ)등의 스케줄링 정책을 시도해보았고, 모든 작업이 끝나는 시간을 기준으로 했을 때, optimal solution과 60%까지 차이가 나타났습니다.  
수정중...
