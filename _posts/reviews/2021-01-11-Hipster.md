---
title: "Hipster: Hybrid Task Manager for Latency-Critical Cloud Workloads"
author: Hyunjoon Jeong
layout: post
category: review
---

본 리뷰는 HPCA'17에 게재된 논문 "Hipster: Hybrid Task Manager for Latency-Critical Cloud Workloads"를 읽고 내용을 간단히 정리하고자 쓰였습니다.
(틀린 내용이나 잘못 이해하고 있는 부분이 있다면 지적 부탁 드리겠습니다.)  

Hipster는 가장 먼저 2013년에 미국의 데이터 센터들이 미국 전역에서 생산된 전력의 2.2%를 사용하고 있다는 이야기에서 출발합니다. 데이터 센터들의 막대한 전력 소모는 향후 10년간 더 증가할 것으로 보여지며, 이러한 추세는 대다수의 workload들이 사용자의 요구에 맞추기 위해 엄격한 QoS를 요구하기 때문에 성능에 대한 요구 증가로 인해 전력 소비의 감소는 더이상 어려울 것이라고 소개합니다. 따라서 Hipster의 연구진들은 workload들이 요구하는 QoS 성능을 만족시키면서 동시에 전력 소모 또한 감축시킬 수 있는 시스템을 고안하고자 했고, 그러한 시스템이 Hipster라고 소개합니다.  
Hipster에 대해 설명하기에 앞서, 가장 먼저 ARM의 heterogeneous computing achitecture인 big.LITTLE에 대해 알아야 합니다. ARM architecture에는 상대적으로 전력 소모가 많지만 성능이 뛰어난 Big Core와, 그에 비해 성능은 떨어지지만 전력 소모가 덜한 Small Core (LITTLE core)가 있습니다. big.LITTLE 구조는 이러한 core를 동시에 탑재하고, 일반적으로 두 종류의 코어 중 한 쪽만이 활성화되어 작동하게 됩니다. 또한 코어들은 동일한 메모리 영역을 사용하기 때문에, 작업들은 상황에 따라 big core나 LITTLE core에 동적으로 할당 됩니다.  

<center><img src="/assets/images/hipster_01.jpg" width="60%" height="60%"></center>  

위 그림은 Google의 데이터 센터에 로드되는 Web-search의 QPS(Query Per Second)를 ARM Juno R1 플랫폼에서 2개의 Big core에 할당했을 때, 서버의 전력 사용 분포를 나타낸 것입니다. 위 그림에서 볼 수 있듯이, QPS는 최대 로드 용량의 5%까지 떨어지는데 비해, 전력 소모는 60%에서 머물고 있습니다. 이로인해 학계와 산업계에서는 시스템의 전력 소모는 활용률과 비례하고 더 완벽한 비례성을 목표로 하고 있다고 합니다. Hipster의 저자들은 에너지 효율을 위해 DVFS(Dynamic Voltage and Frequency Scaling)을 이기종 서버에 결합할 수 있다고 주장합니다.

<center><img src="/assets/images/hipster_02.jpg" width="60%" height="60%"></center>  

위 그림은 Octopus-Man이라는 baseline을 사용한 RPS(Request Per Second)/Watt와 QPS/Watt를 여러 core configuration과 DVFS 세팅을 기준으로 나타낸 그래프 입니다. HetCMP는 Hipster의 저자들이 연구한 DVFS와 이기종의 core type을 합친 heterogeneous architecture를 의미합니다. 각 architecture는 각각 Memcached와 Web-Search에 대한 벤치마크를 다른 여러 load level별로 실행하였습니다. 60% 이하의 낮은 load에서 두 벤치마크는 동일하게 4개의 small core를 사용했고, 마찬가지로 95% 이상의 높은 load에서는 2개의 big core를 이용하였습니다. 낮은 로드의 경우, 성능이 낮은 코어를 사용해도 QoS를 충분히 충족시킬 수 있기 때문에 전력 사용이 낮은 코어를 사용하게 됩니다. 하지만 load가 증가하게 되면서 HetCMP는 낮은 성능의 코어에서 특정 DVFS의 최적화된 core configuration으로 전환하게 됩니다. 그에 비해 baseline으로 사용된 Octopus-Man은 latency를 충족시키기 위해 load가 증가할 경우 성능이 높은 코어의 조합으로만 전환하게 됩니다. 이 경우, QoS는 충족할 수 있게 되지만 전력 소모가 높아지게 되면서 RPS/Watt와 QPS/Watt가 떨어지게 됩니다. 이를 통해 기존의 heuristic을 적용한 Octopus-Man은 데이터 센터가 하루동안 일반적으로 겪에 되는 중간 정도의 load(60~95%)에는 전력 소모를 고려하지 않았음을 Hipster 저자들은 지적합니다.

수정중...

\[논문 출처 및 그림]: <a href="https://ieeexplore.ieee.org/document/7920843">Hipster: Hybrid Task Manager for Latency-Critical Cloud Workloads</a>, Rajiv Nishtala, Paul Carpenter, Vinicius Petrucci, Xavier Martorell, HPCA'17
